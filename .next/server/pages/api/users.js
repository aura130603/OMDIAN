"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/users";
exports.ids = ["pages/api/users"];
exports.modules = {

/***/ "(api-node)/./lib/db.js":
/*!*******************!*\
  !*** ./lib/db.js ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   executeQuery: () => (/* binding */ executeQuery),\n/* harmony export */   getConnection: () => (/* binding */ getConnection),\n/* harmony export */   testConnection: () => (/* binding */ testConnection)\n/* harmony export */ });\n/* harmony import */ var mysql2_promise__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mysql2/promise */ \"mysql2/promise\");\n/* harmony import */ var mysql2_promise__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mysql2_promise__WEBPACK_IMPORTED_MODULE_0__);\n\nconst dbConfig = {\n    host: process.env.DB_HOST || 'localhost',\n    user: process.env.DB_USER || 'root',\n    password: process.env.DB_PASSWORD || 'password',\n    // password: process.env.DB_PASSWORD || '',\n    database: process.env.DB_NAME || 'omdian_bpskudus',\n    waitForConnections: true,\n    connectionLimit: 10,\n    queueLimit: 0\n};\n// Create connection pool\nconst pool = mysql2_promise__WEBPACK_IMPORTED_MODULE_0___default().createPool(dbConfig);\n// Test database connection\nconst testConnection = async ()=>{\n    try {\n        const connection = await pool.getConnection();\n        console.log('✅ Database connected successfully');\n        await connection.release();\n        return true;\n    } catch (error) {\n        console.error('❌ Database connection failed:', error.message);\n        return false;\n    }\n};\n// Execute query with error handling\nconst executeQuery = async (query, params = [])=>{\n    try {\n        const [results] = await pool.execute(query, params);\n        return {\n            success: true,\n            data: results\n        };\n    } catch (error) {\n        console.error('Database query error:', error.message);\n        return {\n            success: false,\n            error: error.message\n        };\n    }\n};\n// Get a single connection for transactions\nconst getConnection = async ()=>{\n    try {\n        return await pool.getConnection();\n    } catch (error) {\n        console.error('Failed to get database connection:', error.message);\n        throw error;\n    }\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (pool);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL2xpYi9kYi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBa0M7QUFFbEMsTUFBTUMsV0FBVztJQUNmQyxNQUFNQyxRQUFRQyxHQUFHLENBQUNDLE9BQU8sSUFBSTtJQUM3QkMsTUFBTUgsUUFBUUMsR0FBRyxDQUFDRyxPQUFPLElBQUk7SUFDN0JDLFVBQVVMLFFBQVFDLEdBQUcsQ0FBQ0ssV0FBVyxJQUFJO0lBQ3JDLDJDQUEyQztJQUMzQ0MsVUFBVVAsUUFBUUMsR0FBRyxDQUFDTyxPQUFPLElBQUk7SUFDakNDLG9CQUFvQjtJQUNwQkMsaUJBQWlCO0lBQ2pCQyxZQUFZO0FBQ2Q7QUFFQSx5QkFBeUI7QUFDekIsTUFBTUMsT0FBT2YsZ0VBQWdCLENBQUNDO0FBRTlCLDJCQUEyQjtBQUNwQixNQUFNZ0IsaUJBQWlCO0lBQzVCLElBQUk7UUFDRixNQUFNQyxhQUFhLE1BQU1ILEtBQUtJLGFBQWE7UUFDM0NDLFFBQVFDLEdBQUcsQ0FBQztRQUNaLE1BQU1ILFdBQVdJLE9BQU87UUFDeEIsT0FBTztJQUNULEVBQUUsT0FBT0MsT0FBTztRQUNkSCxRQUFRRyxLQUFLLENBQUMsaUNBQWlDQSxNQUFNQyxPQUFPO1FBQzVELE9BQU87SUFDVDtBQUNGLEVBQUM7QUFFRCxvQ0FBb0M7QUFDN0IsTUFBTUMsZUFBZSxPQUFPQyxPQUFPQyxTQUFTLEVBQUU7SUFDbkQsSUFBSTtRQUNGLE1BQU0sQ0FBQ0MsUUFBUSxHQUFHLE1BQU1iLEtBQUtjLE9BQU8sQ0FBQ0gsT0FBT0M7UUFDNUMsT0FBTztZQUFFRyxTQUFTO1lBQU1DLE1BQU1IO1FBQVE7SUFDeEMsRUFBRSxPQUFPTCxPQUFPO1FBQ2RILFFBQVFHLEtBQUssQ0FBQyx5QkFBeUJBLE1BQU1DLE9BQU87UUFDcEQsT0FBTztZQUFFTSxTQUFTO1lBQU9QLE9BQU9BLE1BQU1DLE9BQU87UUFBQztJQUNoRDtBQUNGLEVBQUM7QUFFRCwyQ0FBMkM7QUFDcEMsTUFBTUwsZ0JBQWdCO0lBQzNCLElBQUk7UUFDRixPQUFPLE1BQU1KLEtBQUtJLGFBQWE7SUFDakMsRUFBRSxPQUFPSSxPQUFPO1FBQ2RILFFBQVFHLEtBQUssQ0FBQyxzQ0FBc0NBLE1BQU1DLE9BQU87UUFDakUsTUFBTUQ7SUFDUjtBQUNGLEVBQUM7QUFFRCxpRUFBZVIsSUFBSUEsRUFBQSIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxyYXJhY1xcRG93bmxvYWRzXFxPTURJQU5cXGxpYlxcZGIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG15c3FsIGZyb20gJ215c3FsMi9wcm9taXNlJ1xuXG5jb25zdCBkYkNvbmZpZyA9IHtcbiAgaG9zdDogcHJvY2Vzcy5lbnYuREJfSE9TVCB8fCAnbG9jYWxob3N0JyxcbiAgdXNlcjogcHJvY2Vzcy5lbnYuREJfVVNFUiB8fCAncm9vdCcsXG4gIHBhc3N3b3JkOiBwcm9jZXNzLmVudi5EQl9QQVNTV09SRCB8fCAncGFzc3dvcmQnLFxuICAvLyBwYXNzd29yZDogcHJvY2Vzcy5lbnYuREJfUEFTU1dPUkQgfHwgJycsXG4gIGRhdGFiYXNlOiBwcm9jZXNzLmVudi5EQl9OQU1FIHx8ICdvbWRpYW5fYnBza3VkdXMnLFxuICB3YWl0Rm9yQ29ubmVjdGlvbnM6IHRydWUsXG4gIGNvbm5lY3Rpb25MaW1pdDogMTAsXG4gIHF1ZXVlTGltaXQ6IDBcbn1cblxuLy8gQ3JlYXRlIGNvbm5lY3Rpb24gcG9vbFxuY29uc3QgcG9vbCA9IG15c3FsLmNyZWF0ZVBvb2woZGJDb25maWcpXG5cbi8vIFRlc3QgZGF0YWJhc2UgY29ubmVjdGlvblxuZXhwb3J0IGNvbnN0IHRlc3RDb25uZWN0aW9uID0gYXN5bmMgKCkgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBhd2FpdCBwb29sLmdldENvbm5lY3Rpb24oKVxuICAgIGNvbnNvbGUubG9nKCfinIUgRGF0YWJhc2UgY29ubmVjdGVkIHN1Y2Nlc3NmdWxseScpXG4gICAgYXdhaXQgY29ubmVjdGlvbi5yZWxlYXNlKClcbiAgICByZXR1cm4gdHJ1ZVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZDonLCBlcnJvci5tZXNzYWdlKVxuICAgIHJldHVybiBmYWxzZVxuICB9XG59XG5cbi8vIEV4ZWN1dGUgcXVlcnkgd2l0aCBlcnJvciBoYW5kbGluZ1xuZXhwb3J0IGNvbnN0IGV4ZWN1dGVRdWVyeSA9IGFzeW5jIChxdWVyeSwgcGFyYW1zID0gW10pID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBbcmVzdWx0c10gPSBhd2FpdCBwb29sLmV4ZWN1dGUocXVlcnksIHBhcmFtcylcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXN1bHRzIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdEYXRhYmFzZSBxdWVyeSBlcnJvcjonLCBlcnJvci5tZXNzYWdlKVxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9XG4gIH1cbn1cblxuLy8gR2V0IGEgc2luZ2xlIGNvbm5lY3Rpb24gZm9yIHRyYW5zYWN0aW9uc1xuZXhwb3J0IGNvbnN0IGdldENvbm5lY3Rpb24gPSBhc3luYyAoKSA9PiB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGF3YWl0IHBvb2wuZ2V0Q29ubmVjdGlvbigpXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGdldCBkYXRhYmFzZSBjb25uZWN0aW9uOicsIGVycm9yLm1lc3NhZ2UpXG4gICAgdGhyb3cgZXJyb3JcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBwb29sXG4iXSwibmFtZXMiOlsibXlzcWwiLCJkYkNvbmZpZyIsImhvc3QiLCJwcm9jZXNzIiwiZW52IiwiREJfSE9TVCIsInVzZXIiLCJEQl9VU0VSIiwicGFzc3dvcmQiLCJEQl9QQVNTV09SRCIsImRhdGFiYXNlIiwiREJfTkFNRSIsIndhaXRGb3JDb25uZWN0aW9ucyIsImNvbm5lY3Rpb25MaW1pdCIsInF1ZXVlTGltaXQiLCJwb29sIiwiY3JlYXRlUG9vbCIsInRlc3RDb25uZWN0aW9uIiwiY29ubmVjdGlvbiIsImdldENvbm5lY3Rpb24iLCJjb25zb2xlIiwibG9nIiwicmVsZWFzZSIsImVycm9yIiwibWVzc2FnZSIsImV4ZWN1dGVRdWVyeSIsInF1ZXJ5IiwicGFyYW1zIiwicmVzdWx0cyIsImV4ZWN1dGUiLCJzdWNjZXNzIiwiZGF0YSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./lib/db.js\n");

/***/ }),

/***/ "(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fusers&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cusers%5Cindex.js&middlewareConfigBase64=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fusers&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cusers%5Cindex.js&middlewareConfigBase64=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   handler: () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_api_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/api-utils */ \"(api-node)/./node_modules/next/dist/server/api-utils/index.js\");\n/* harmony import */ var next_dist_server_api_utils__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_api_utils__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_users_index_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./pages\\api\\users\\index.js */ \"(api-node)/./pages/api/users/index.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! next/dist/server/lib/trace/tracer */ \"(api-node)/./node_modules/next/dist/server/lib/trace/tracer.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/dist/server/lib/trace/constants */ \"(api-node)/./node_modules/next/dist/server/lib/trace/constants.js\");\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_users_index_js__WEBPACK_IMPORTED_MODULE_4__]);\n_pages_api_users_index_js__WEBPACK_IMPORTED_MODULE_4__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n// Import the userland code.\n\n\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_3__.hoist)(_pages_api_users_index_js__WEBPACK_IMPORTED_MODULE_4__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_3__.hoist)(_pages_api_users_index_js__WEBPACK_IMPORTED_MODULE_4__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_2__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/users\",\n        pathname: \"/api/users\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _pages_api_users_index_js__WEBPACK_IMPORTED_MODULE_4__,\n    distDir: \".next\" || 0,\n    projectDir:  false || ''\n});\nasync function handler(req, res, ctx) {\n    let srcPage = \"/api/users\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (false) {}\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return;\n    }\n    const { query, params, prerenderManifest } = prepareResult;\n    try {\n        const method = req.method || 'GET';\n        const tracer = (0,next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5__.getTracer)();\n        const activeSpan = tracer.getActiveScopeSpan();\n        const onRequestError = routeModule.instrumentationOnRequestError.bind(routeModule);\n        const invokeRouteModule = async (span)=>routeModule.render(req, res, {\n                query: {\n                    ...query,\n                    ...params\n                },\n                params,\n                allowedRevalidateHeaderKeys: undefined,\n                multiZoneDraftMode: Boolean(\"false\"),\n                trustHostHeader: undefined,\n                // TODO: get this from from runtime env so manifest\n                // doesn't need to load\n                previewProps: prerenderManifest.preview,\n                propagateError: false,\n                dev: routeModule.isDev,\n                page: \"/api/users\",\n                projectDir:  false || '',\n                onError: (...args)=>onRequestError(req, ...args)\n            }).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6__.BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${req.url}`);\n                }\n            });\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await invokeRouteModule(activeSpan);\n        } else {\n            await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6__.BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${req.url}`,\n                    kind: next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5__.SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, invokeRouteModule));\n        }\n    } catch (err) {\n        // we re-throw in dev to show the error overlay\n        if (routeModule.isDev) {\n            throw err;\n        }\n        // this is technically an invariant as error handling\n        // should be done inside of api-resolver onError\n        (0,next_dist_server_api_utils__WEBPACK_IMPORTED_MODULE_0__.sendError)(res, 500, 'Internal Server Error');\n    } finally{\n        // We don't allow any waitUntil work in pages API routes currently\n        // so if callback is present return with resolved promise since no\n        // pending work\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n    }\n}\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGdXNlcnMmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyU1Q2FwaSU1Q3VzZXJzJTVDaW5kZXguanMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXVEO0FBQ0M7QUFDdUM7QUFDckM7QUFDMUQ7QUFDMEQ7QUFDYztBQUNGO0FBQ3RFO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyxzREFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsc0RBQVE7QUFDcEM7QUFDQSx3QkFBd0IseUdBQW1CO0FBQzNDO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixhQUFhLE9BQW9DLElBQUksQ0FBRTtBQUN2RCxnQkFBZ0IsTUFBdUM7QUFDdkQsQ0FBQztBQUNNO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLEtBQXFCLEVBQUUsRUFFMUI7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksbUNBQW1DO0FBQy9DO0FBQ0E7QUFDQSx1QkFBdUIsNEVBQVM7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsNkNBQTZDLFNBQTZDO0FBQzFGLDRDQUE0QyxPQUF3QztBQUNwRixpQ0FBaUMsU0FBb0M7QUFDckU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLE1BQXVDO0FBQ25FO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRUFBaUUsZ0ZBQWM7QUFDL0UsK0RBQStELHlDQUF5QztBQUN4RztBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxRQUFRLEVBQUUsTUFBTTtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBLGtCQUFrQjtBQUNsQix1Q0FBdUMsUUFBUSxFQUFFLFFBQVE7QUFDekQ7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1YsNkVBQTZFLGdGQUFjO0FBQzNGLGlDQUFpQyxRQUFRLEVBQUUsUUFBUTtBQUNuRCwwQkFBMEIsdUVBQVE7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxxRUFBUztBQUNqQixNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHFDIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc2VuZEVycm9yIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvYXBpLXV0aWxzXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzXFxcXGFwaVxcXFx1c2Vyc1xcXFxpbmRleC5qc1wiO1xuaW1wb3J0IHsgZ2V0VHJhY2VyLCBTcGFuS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi90cmFjZS90cmFjZXJcIjtcbmltcG9ydCB7IEJhc2VTZXJ2ZXJTcGFuIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3RyYWNlL2NvbnN0YW50c1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCAnZGVmYXVsdCcpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgJ2NvbmZpZycpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS91c2Vyc1wiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3VzZXJzXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogJycsXG4gICAgICAgIGZpbGVuYW1lOiAnJ1xuICAgIH0sXG4gICAgdXNlcmxhbmQsXG4gICAgZGlzdERpcjogcHJvY2Vzcy5lbnYuX19ORVhUX1JFTEFUSVZFX0RJU1RfRElSIHx8ICcnLFxuICAgIHByb2plY3REaXI6IHByb2Nlc3MuZW52Ll9fTkVYVF9SRUxBVElWRV9QUk9KRUNUX0RJUiB8fCAnJ1xufSk7XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcywgY3R4KSB7XG4gICAgbGV0IHNyY1BhZ2UgPSBcIi9hcGkvdXNlcnNcIjtcbiAgICAvLyB0dXJib3BhY2sgZG9lc24ndCBub3JtYWxpemUgYC9pbmRleGAgaW4gdGhlIHBhZ2UgbmFtZVxuICAgIC8vIHNvIHdlIG5lZWQgdG8gdG8gcHJvY2VzcyBkeW5hbWljIHJvdXRlcyBwcm9wZXJseVxuICAgIC8vIFRPRE86IGZpeCB0dXJib3BhY2sgcHJvdmlkaW5nIGRpZmZlcmluZyB2YWx1ZSBmcm9tIHdlYnBhY2tcbiAgICBpZiAocHJvY2Vzcy5lbnYuVFVSQk9QQUNLKSB7XG4gICAgICAgIHNyY1BhZ2UgPSBzcmNQYWdlLnJlcGxhY2UoL1xcL2luZGV4JC8sICcnKSB8fCAnLyc7XG4gICAgfVxuICAgIGNvbnN0IHByZXBhcmVSZXN1bHQgPSBhd2FpdCByb3V0ZU1vZHVsZS5wcmVwYXJlKHJlcSwgcmVzLCB7XG4gICAgICAgIHNyY1BhZ2VcbiAgICB9KTtcbiAgICBpZiAoIXByZXBhcmVSZXN1bHQpIHtcbiAgICAgICAgcmVzLnN0YXR1c0NvZGUgPSA0MDA7XG4gICAgICAgIHJlcy5lbmQoJ0JhZCBSZXF1ZXN0Jyk7XG4gICAgICAgIGN0eC53YWl0VW50aWwgPT0gbnVsbCA/IHZvaWQgMCA6IGN0eC53YWl0VW50aWwuY2FsbChjdHgsIFByb21pc2UucmVzb2x2ZSgpKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB7IHF1ZXJ5LCBwYXJhbXMsIHByZXJlbmRlck1hbmlmZXN0IH0gPSBwcmVwYXJlUmVzdWx0O1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IG1ldGhvZCA9IHJlcS5tZXRob2QgfHwgJ0dFVCc7XG4gICAgICAgIGNvbnN0IHRyYWNlciA9IGdldFRyYWNlcigpO1xuICAgICAgICBjb25zdCBhY3RpdmVTcGFuID0gdHJhY2VyLmdldEFjdGl2ZVNjb3BlU3BhbigpO1xuICAgICAgICBjb25zdCBvblJlcXVlc3RFcnJvciA9IHJvdXRlTW9kdWxlLmluc3RydW1lbnRhdGlvbk9uUmVxdWVzdEVycm9yLmJpbmQocm91dGVNb2R1bGUpO1xuICAgICAgICBjb25zdCBpbnZva2VSb3V0ZU1vZHVsZSA9IGFzeW5jIChzcGFuKT0+cm91dGVNb2R1bGUucmVuZGVyKHJlcSwgcmVzLCB7XG4gICAgICAgICAgICAgICAgcXVlcnk6IHtcbiAgICAgICAgICAgICAgICAgICAgLi4ucXVlcnksXG4gICAgICAgICAgICAgICAgICAgIC4uLnBhcmFtc1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcGFyYW1zLFxuICAgICAgICAgICAgICAgIGFsbG93ZWRSZXZhbGlkYXRlSGVhZGVyS2V5czogcHJvY2Vzcy5lbnYuX19ORVhUX0FMTE9XRURfUkVWQUxJREFURV9IRUFERVJTLFxuICAgICAgICAgICAgICAgIG11bHRpWm9uZURyYWZ0TW9kZTogQm9vbGVhbihwcm9jZXNzLmVudi5fX05FWFRfTVVMVElfWk9ORV9EUkFGVF9NT0RFKSxcbiAgICAgICAgICAgICAgICB0cnVzdEhvc3RIZWFkZXI6IHByb2Nlc3MuZW52Ll9fTkVYVF9UUlVTVF9IT1NUX0hFQURFUixcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBnZXQgdGhpcyBmcm9tIGZyb20gcnVudGltZSBlbnYgc28gbWFuaWZlc3RcbiAgICAgICAgICAgICAgICAvLyBkb2Vzbid0IG5lZWQgdG8gbG9hZFxuICAgICAgICAgICAgICAgIHByZXZpZXdQcm9wczogcHJlcmVuZGVyTWFuaWZlc3QucHJldmlldyxcbiAgICAgICAgICAgICAgICBwcm9wYWdhdGVFcnJvcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgZGV2OiByb3V0ZU1vZHVsZS5pc0RldixcbiAgICAgICAgICAgICAgICBwYWdlOiBcIi9hcGkvdXNlcnNcIixcbiAgICAgICAgICAgICAgICBwcm9qZWN0RGlyOiBwcm9jZXNzLmVudi5fX05FWFRfUkVMQVRJVkVfUFJPSkVDVF9ESVIgfHwgJycsXG4gICAgICAgICAgICAgICAgb25FcnJvcjogKC4uLmFyZ3MpPT5vblJlcXVlc3RFcnJvcihyZXEsIC4uLmFyZ3MpXG4gICAgICAgICAgICB9KS5maW5hbGx5KCgpPT57XG4gICAgICAgICAgICAgICAgaWYgKCFzcGFuKSByZXR1cm47XG4gICAgICAgICAgICAgICAgc3Bhbi5zZXRBdHRyaWJ1dGVzKHtcbiAgICAgICAgICAgICAgICAgICAgJ2h0dHAuc3RhdHVzX2NvZGUnOiByZXMuc3RhdHVzQ29kZSxcbiAgICAgICAgICAgICAgICAgICAgJ25leHQucnNjJzogZmFsc2VcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCByb290U3BhbkF0dHJpYnV0ZXMgPSB0cmFjZXIuZ2V0Um9vdFNwYW5BdHRyaWJ1dGVzKCk7XG4gICAgICAgICAgICAgICAgLy8gV2Ugd2VyZSB1bmFibGUgdG8gZ2V0IGF0dHJpYnV0ZXMsIHByb2JhYmx5IE9URUwgaXMgbm90IGVuYWJsZWRcbiAgICAgICAgICAgICAgICBpZiAoIXJvb3RTcGFuQXR0cmlidXRlcykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChyb290U3BhbkF0dHJpYnV0ZXMuZ2V0KCduZXh0LnNwYW5fdHlwZScpICE9PSBCYXNlU2VydmVyU3Bhbi5oYW5kbGVSZXF1ZXN0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgVW5leHBlY3RlZCByb290IHNwYW4gdHlwZSAnJHtyb290U3BhbkF0dHJpYnV0ZXMuZ2V0KCduZXh0LnNwYW5fdHlwZScpfScuIFBsZWFzZSByZXBvcnQgdGhpcyBOZXh0LmpzIGlzc3VlIGh0dHBzOi8vZ2l0aHViLmNvbS92ZXJjZWwvbmV4dC5qc2ApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHJvdXRlID0gcm9vdFNwYW5BdHRyaWJ1dGVzLmdldCgnbmV4dC5yb3V0ZScpO1xuICAgICAgICAgICAgICAgIGlmIChyb3V0ZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gYCR7bWV0aG9kfSAke3JvdXRlfWA7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4uc2V0QXR0cmlidXRlcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAnbmV4dC5yb3V0ZSc6IHJvdXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHAucm91dGUnOiByb3V0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICduZXh0LnNwYW5fbmFtZSc6IG5hbWVcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4udXBkYXRlTmFtZShuYW1lKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzcGFuLnVwZGF0ZU5hbWUoYCR7bWV0aG9kfSAke3JlcS51cmx9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIC8vIFRPRE86IGFjdGl2ZVNwYW4gY29kZSBwYXRoIGlzIGZvciB3aGVuIHdyYXBwZWQgYnlcbiAgICAgICAgLy8gbmV4dC1zZXJ2ZXIgY2FuIGJlIHJlbW92ZWQgd2hlbiB0aGlzIGlzIG5vIGxvbmdlciB1c2VkXG4gICAgICAgIGlmIChhY3RpdmVTcGFuKSB7XG4gICAgICAgICAgICBhd2FpdCBpbnZva2VSb3V0ZU1vZHVsZShhY3RpdmVTcGFuKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGF3YWl0IHRyYWNlci53aXRoUHJvcGFnYXRlZENvbnRleHQocmVxLmhlYWRlcnMsICgpPT50cmFjZXIudHJhY2UoQmFzZVNlcnZlclNwYW4uaGFuZGxlUmVxdWVzdCwge1xuICAgICAgICAgICAgICAgICAgICBzcGFuTmFtZTogYCR7bWV0aG9kfSAke3JlcS51cmx9YCxcbiAgICAgICAgICAgICAgICAgICAga2luZDogU3BhbktpbmQuU0VSVkVSLFxuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnaHR0cC5tZXRob2QnOiBtZXRob2QsXG4gICAgICAgICAgICAgICAgICAgICAgICAnaHR0cC50YXJnZXQnOiByZXEudXJsXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCBpbnZva2VSb3V0ZU1vZHVsZSkpO1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIC8vIHdlIHJlLXRocm93IGluIGRldiB0byBzaG93IHRoZSBlcnJvciBvdmVybGF5XG4gICAgICAgIGlmIChyb3V0ZU1vZHVsZS5pc0Rldikge1xuICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICB9XG4gICAgICAgIC8vIHRoaXMgaXMgdGVjaG5pY2FsbHkgYW4gaW52YXJpYW50IGFzIGVycm9yIGhhbmRsaW5nXG4gICAgICAgIC8vIHNob3VsZCBiZSBkb25lIGluc2lkZSBvZiBhcGktcmVzb2x2ZXIgb25FcnJvclxuICAgICAgICBzZW5kRXJyb3IocmVzLCA1MDAsICdJbnRlcm5hbCBTZXJ2ZXIgRXJyb3InKTtcbiAgICB9IGZpbmFsbHl7XG4gICAgICAgIC8vIFdlIGRvbid0IGFsbG93IGFueSB3YWl0VW50aWwgd29yayBpbiBwYWdlcyBBUEkgcm91dGVzIGN1cnJlbnRseVxuICAgICAgICAvLyBzbyBpZiBjYWxsYmFjayBpcyBwcmVzZW50IHJldHVybiB3aXRoIHJlc29sdmVkIHByb21pc2Ugc2luY2Ugbm9cbiAgICAgICAgLy8gcGVuZGluZyB3b3JrXG4gICAgICAgIGN0eC53YWl0VW50aWwgPT0gbnVsbCA/IHZvaWQgMCA6IGN0eC53YWl0VW50aWwuY2FsbChjdHgsIFByb21pc2UucmVzb2x2ZSgpKTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fusers&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cusers%5Cindex.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./pages/api/users/index.js":
/*!**********************************!*\
  !*** ./pages/api/users/index.js ***!
  \**********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../lib/db */ \"(api-node)/./lib/db.js\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bcryptjs */ \"bcryptjs\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([bcryptjs__WEBPACK_IMPORTED_MODULE_1__]);\nbcryptjs__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\nasync function handler(req, res) {\n    try {\n        switch(req.method){\n            case 'GET':\n                return await getUsers(req, res);\n            case 'POST':\n                return await createUser(req, res);\n            case 'PUT':\n                return await updateUser(req, res);\n            case 'DELETE':\n                return await deleteUser(req, res);\n            default:\n                return res.status(405).json({\n                    message: 'Method not allowed'\n                });\n        }\n    } catch (error) {\n        console.error('Users API error:', error);\n        res.status(500).json({\n            success: false,\n            message: 'Terjadi kesalahan server'\n        });\n    }\n}\n// GET - Retrieve users\nasync function getUsers(req, res) {\n    const { role } = req.query;\n    // Only admin and kepala_bps can access user list\n    if (role !== 'admin' && role !== 'kepala_bps') {\n        return res.status(403).json({\n            success: false,\n            message: 'Akses ditolak'\n        });\n    }\n    const query = `\n    SELECT\n      id,\n      username,\n      nip,\n      nama,\n      pangkat,\n      golongan,\n      jabatan,\n      pendidikan,\n      role,\n      status,\n      created_at as createdAt\n    FROM users\n    ORDER BY created_at DESC\n  `;\n    const result = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.executeQuery)(query);\n    if (!result.success) {\n        console.error('Database error:', result.error);\n        // Fallback to dummy users for read-only GET\n        const { DUMMY_USERS } = await __webpack_require__.e(/*! import() */ \"_api-node_pages_api_users_dummy-operations_js\").then(__webpack_require__.bind(__webpack_require__, /*! ./dummy-operations */ \"(api-node)/./pages/api/users/dummy-operations.js\"));\n        const mapped = DUMMY_USERS.map((user)=>({\n                id: user.id,\n                username: user.username,\n                nip: user.nip,\n                nama: user.nama,\n                pangkat: user.pangkat,\n                golongan: user.golongan,\n                jabatan: user.jabatan,\n                pendidikan: user.pendidikan,\n                role: user.role,\n                status: user.status,\n                createdAt: user.created_at\n            }));\n        console.log('✅ Users data retrieved with fallback data');\n        return res.status(200).json({\n            success: true,\n            data: mapped\n        });\n    }\n    console.log('✅ Users data retrieved from database');\n    res.status(200).json({\n        success: true,\n        data: result.data\n    });\n}\n// POST - Create new user (Admin only)\nasync function createUser(req, res) {\n    const { requestorRole, username, password, nip, nama, pangkat, golongan, jabatan, pendidikan } = req.body;\n    // Only admin can create users (kepala_bps can only read)\n    if (requestorRole !== 'admin') {\n        return res.status(403).json({\n            success: false,\n            message: 'Akses ditolak - Hanya admin yang dapat menambah pegawai'\n        });\n    }\n    // Validation\n    if (!username || !password || !nip || !nama || !pangkat || !golongan || !jabatan || !pendidikan) {\n        return res.status(400).json({\n            success: false,\n            message: 'Semua field wajib diisi'\n        });\n    }\n    // Check if username or NIP already exists\n    const checkQuery = 'SELECT id FROM users WHERE username = ? OR nip = ?';\n    const existingUser = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.executeQuery)(checkQuery, [\n        username,\n        nip\n    ]);\n    if (!existingUser.success) {\n        return res.status(500).json({\n            success: false,\n            message: 'Gagal memeriksa data existing'\n        });\n    }\n    if (existingUser.data.length > 0) {\n        return res.status(409).json({\n            success: false,\n            message: 'Username atau NIP sudah digunakan'\n        });\n    }\n    // Hash password\n    const hashedPassword = await bcryptjs__WEBPACK_IMPORTED_MODULE_1__[\"default\"].hash(password, 10);\n    // Insert new user\n    const insertQuery = `\n    INSERT INTO users (\n      username, password, nip, nama, pangkat, golongan, jabatan, pendidikan, role, status\n    ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, 'pegawai', 'aktif')\n  `;\n    const insertParams = [\n        username,\n        hashedPassword,\n        nip,\n        nama,\n        pangkat,\n        golongan,\n        jabatan,\n        pendidikan\n    ];\n    const result = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.executeQuery)(insertQuery, insertParams);\n    if (!result.success) {\n        console.error('Insert user error:', result.error);\n        return res.status(500).json({\n            success: false,\n            message: 'Gagal menambahkan pengguna'\n        });\n    }\n    console.log('✅ User created in database');\n    res.status(201).json({\n        success: true,\n        message: 'Pengguna berhasil ditambahkan'\n    });\n}\n// PUT - Update user\nasync function updateUser(req, res) {\n    const { requestorRole, id, username, password, nama, pangkat, golongan, jabatan, pendidikan } = req.body;\n    // Only admin can update users (kepala_bps can only read)\n    if (requestorRole !== 'admin') {\n        return res.status(403).json({\n            success: false,\n            message: 'Akses ditolak - Hanya admin yang dapat mengubah data pegawai'\n        });\n    }\n    if (!id) {\n        return res.status(400).json({\n            success: false,\n            message: 'ID pengguna diperlukan'\n        });\n    }\n    // Check if user exists\n    const checkQuery = 'SELECT id FROM users WHERE id = ?';\n    const existingUser = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.executeQuery)(checkQuery, [\n        id\n    ]);\n    if (!existingUser.success || existingUser.data.length === 0) {\n        return res.status(404).json({\n            success: false,\n            message: 'Pengguna tidak ditemukan'\n        });\n    }\n    // Build update query\n    let updateQuery = `\n    UPDATE users SET\n      username = ?, nama = ?, pangkat = ?, golongan = ?, jabatan = ?, pendidikan = ?\n  `;\n    let updateParams = [\n        username,\n        nama,\n        pangkat,\n        golongan,\n        jabatan,\n        pendidikan\n    ];\n    // Add password to update if provided\n    if (password) {\n        const hashedPassword = await bcryptjs__WEBPACK_IMPORTED_MODULE_1__[\"default\"].hash(password, 10);\n        updateQuery += ', password = ?';\n        updateParams.push(hashedPassword);\n    }\n    updateQuery += ' WHERE id = ?';\n    updateParams.push(id);\n    const result = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.executeQuery)(updateQuery, updateParams);\n    if (!result.success) {\n        console.error('Update user error:', result.error);\n        return res.status(500).json({\n            success: false,\n            message: 'Gagal memperbarui pengguna'\n        });\n    }\n    console.log('✅ User updated in database');\n    res.status(200).json({\n        success: true,\n        message: 'Data pengguna berhasil diperbarui'\n    });\n}\n// DELETE - Delete user\nasync function deleteUser(req, res) {\n    const { id, requestorRole } = req.query;\n    // Only admin can delete users (kepala_bps can only read)\n    if (requestorRole !== 'admin') {\n        return res.status(403).json({\n            success: false,\n            message: 'Akses ditolak - Hanya admin yang dapat menghapus pegawai'\n        });\n    }\n    if (!id) {\n        return res.status(400).json({\n            success: false,\n            message: 'ID pengguna diperlukan'\n        });\n    }\n    // Check if user exists and get role\n    const checkQuery = 'SELECT role FROM users WHERE id = ?';\n    const existingUser = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.executeQuery)(checkQuery, [\n        id\n    ]);\n    if (!existingUser.success || existingUser.data.length === 0) {\n        return res.status(404).json({\n            success: false,\n            message: 'Pengguna tidak ditemukan'\n        });\n    }\n    // Check if user is admin (don't allow deleting admin users)\n    if (existingUser.data[0].role === 'admin') {\n        return res.status(403).json({\n            success: false,\n            message: 'Admin tidak dapat dihapus'\n        });\n    }\n    // Delete user\n    const deleteQuery = 'DELETE FROM users WHERE id = ?';\n    const result = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.executeQuery)(deleteQuery, [\n        id\n    ]);\n    if (!result.success) {\n        console.error('Delete user error:', result.error);\n        return res.status(500).json({\n            success: false,\n            message: 'Gagal menghapus pengguna'\n        });\n    }\n    console.log('✅ User deleted from database');\n    res.status(200).json({\n        success: true,\n        message: 'Pengguna berhasil dihapus'\n    });\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFBSTJCLGFBQWFMLElBQUksQ0FBQyxFQUFFLENBQUNsQixJQUFJLEtBQUssU0FBUztRQUN6QyxPQUFPWixJQUFJTSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQzFCSSxTQUFTO1lBQ1RILFNBQVM7UUFDWDtJQUNGO0lBRUEsY0FBYztJQUNkLE1BQU1vQyxjQUFjO0lBQ3BCLE1BQU05QixTQUFTLE1BQU1sQixxREFBWUEsQ0FBQ2dELGFBQWE7UUFBQ3pCO0tBQUc7SUFFbkQsSUFBSSxDQUFDTCxPQUFPSCxPQUFPLEVBQUU7UUFDbkJELFFBQVFELEtBQUssQ0FBQyxzQkFBc0JLLE9BQU9MLEtBQUs7UUFDaEQsT0FBT1QsSUFBSU0sTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUMxQkksU0FBUztZQUNUSCxTQUFTO1FBQ1g7SUFDRjtJQUVBRSxRQUFRbUIsR0FBRyxDQUFDO0lBRVo3QixJQUFJTSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1FBQ25CSSxTQUFTO1FBQ1RILFNBQVM7SUFDWDtBQUNGIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXHJhcmFjXFxEb3dubG9hZHNcXE9NRElBTlxccGFnZXNcXGFwaVxcdXNlcnNcXGluZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGV4ZWN1dGVRdWVyeSB9IGZyb20gJy4uLy4uLy4uL2xpYi9kYidcbmltcG9ydCBiY3J5cHQgZnJvbSAnYmNyeXB0anMnXG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcbiAgdHJ5IHtcbiAgICBzd2l0Y2ggKHJlcS5tZXRob2QpIHtcbiAgICAgIGNhc2UgJ0dFVCc6XG4gICAgICAgIHJldHVybiBhd2FpdCBnZXRVc2VycyhyZXEsIHJlcylcbiAgICAgIGNhc2UgJ1BPU1QnOlxuICAgICAgICByZXR1cm4gYXdhaXQgY3JlYXRlVXNlcihyZXEsIHJlcylcbiAgICAgIGNhc2UgJ1BVVCc6XG4gICAgICAgIHJldHVybiBhd2FpdCB1cGRhdGVVc2VyKHJlcSwgcmVzKVxuICAgICAgY2FzZSAnREVMRVRFJzpcbiAgICAgICAgcmV0dXJuIGF3YWl0IGRlbGV0ZVVzZXIocmVxLCByZXMpXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmpzb24oeyBtZXNzYWdlOiAnTWV0aG9kIG5vdCBhbGxvd2VkJyB9KVxuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdVc2VycyBBUEkgZXJyb3I6JywgZXJyb3IpXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLCBcbiAgICAgIG1lc3NhZ2U6ICdUZXJqYWRpIGtlc2FsYWhhbiBzZXJ2ZXInIFxuICAgIH0pXG4gIH1cbn1cblxuLy8gR0VUIC0gUmV0cmlldmUgdXNlcnNcbmFzeW5jIGZ1bmN0aW9uIGdldFVzZXJzKHJlcSwgcmVzKSB7XG4gIGNvbnN0IHsgcm9sZSB9ID0gcmVxLnF1ZXJ5XG5cbiAgLy8gT25seSBhZG1pbiBhbmQga2VwYWxhX2JwcyBjYW4gYWNjZXNzIHVzZXIgbGlzdFxuICBpZiAocm9sZSAhPT0gJ2FkbWluJyAmJiByb2xlICE9PSAna2VwYWxhX2JwcycpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oe1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBtZXNzYWdlOiAnQWtzZXMgZGl0b2xhaydcbiAgICB9KVxuICB9XG5cbiAgY29uc3QgcXVlcnkgPSBgXG4gICAgU0VMRUNUXG4gICAgICBpZCxcbiAgICAgIHVzZXJuYW1lLFxuICAgICAgbmlwLFxuICAgICAgbmFtYSxcbiAgICAgIHBhbmdrYXQsXG4gICAgICBnb2xvbmdhbixcbiAgICAgIGphYmF0YW4sXG4gICAgICBwZW5kaWRpa2FuLFxuICAgICAgcm9sZSxcbiAgICAgIHN0YXR1cyxcbiAgICAgIGNyZWF0ZWRfYXQgYXMgY3JlYXRlZEF0XG4gICAgRlJPTSB1c2Vyc1xuICAgIE9SREVSIEJZIGNyZWF0ZWRfYXQgREVTQ1xuICBgXG5cbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZXhlY3V0ZVF1ZXJ5KHF1ZXJ5KVxuXG4gIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICBjb25zb2xlLmVycm9yKCdEYXRhYmFzZSBlcnJvcjonLCByZXN1bHQuZXJyb3IpXG4gICAgLy8gRmFsbGJhY2sgdG8gZHVtbXkgdXNlcnMgZm9yIHJlYWQtb25seSBHRVRcbiAgICBjb25zdCB7IERVTU1ZX1VTRVJTIH0gPSBhd2FpdCBpbXBvcnQoJy4vZHVtbXktb3BlcmF0aW9ucycpXG4gICAgY29uc3QgbWFwcGVkID0gRFVNTVlfVVNFUlMubWFwKHVzZXIgPT4gKHtcbiAgICAgIGlkOiB1c2VyLmlkLFxuICAgICAgdXNlcm5hbWU6IHVzZXIudXNlcm5hbWUsXG4gICAgICBuaXA6IHVzZXIubmlwLFxuICAgICAgbmFtYTogdXNlci5uYW1hLFxuICAgICAgcGFuZ2thdDogdXNlci5wYW5na2F0LFxuICAgICAgZ29sb25nYW46IHVzZXIuZ29sb25nYW4sXG4gICAgICBqYWJhdGFuOiB1c2VyLmphYmF0YW4sXG4gICAgICBwZW5kaWRpa2FuOiB1c2VyLnBlbmRpZGlrYW4sXG4gICAgICByb2xlOiB1c2VyLnJvbGUsXG4gICAgICBzdGF0dXM6IHVzZXIuc3RhdHVzLFxuICAgICAgY3JlYXRlZEF0OiB1c2VyLmNyZWF0ZWRfYXRcbiAgICB9KSlcbiAgICBjb25zb2xlLmxvZygn4pyFIFVzZXJzIGRhdGEgcmV0cmlldmVkIHdpdGggZmFsbGJhY2sgZGF0YScpXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBkYXRhOiBtYXBwZWRcbiAgICB9KVxuICB9XG5cbiAgY29uc29sZS5sb2coJ+KchSBVc2VycyBkYXRhIHJldHJpZXZlZCBmcm9tIGRhdGFiYXNlJylcblxuICByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgc3VjY2VzczogdHJ1ZSxcbiAgICBkYXRhOiByZXN1bHQuZGF0YVxuICB9KVxufVxuXG4vLyBQT1NUIC0gQ3JlYXRlIG5ldyB1c2VyIChBZG1pbiBvbmx5KVxuYXN5bmMgZnVuY3Rpb24gY3JlYXRlVXNlcihyZXEsIHJlcykge1xuICBjb25zdCB7XG4gICAgcmVxdWVzdG9yUm9sZSxcbiAgICB1c2VybmFtZSxcbiAgICBwYXNzd29yZCxcbiAgICBuaXAsXG4gICAgbmFtYSxcbiAgICBwYW5na2F0LFxuICAgIGdvbG9uZ2FuLFxuICAgIGphYmF0YW4sXG4gICAgcGVuZGlkaWthblxuICB9ID0gcmVxLmJvZHlcblxuICAvLyBPbmx5IGFkbWluIGNhbiBjcmVhdGUgdXNlcnMgKGtlcGFsYV9icHMgY2FuIG9ubHkgcmVhZClcbiAgaWYgKHJlcXVlc3RvclJvbGUgIT09ICdhZG1pbicpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oe1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBtZXNzYWdlOiAnQWtzZXMgZGl0b2xhayAtIEhhbnlhIGFkbWluIHlhbmcgZGFwYXQgbWVuYW1iYWggcGVnYXdhaSdcbiAgICB9KVxuICB9XG5cbiAgLy8gVmFsaWRhdGlvblxuICBpZiAoIXVzZXJuYW1lIHx8ICFwYXNzd29yZCB8fCAhbmlwIHx8ICFuYW1hIHx8ICFwYW5na2F0IHx8ICFnb2xvbmdhbiB8fCAhamFiYXRhbiB8fCAhcGVuZGlkaWthbikge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IFxuICAgICAgc3VjY2VzczogZmFsc2UsIFxuICAgICAgbWVzc2FnZTogJ1NlbXVhIGZpZWxkIHdhamliIGRpaXNpJyBcbiAgICB9KVxuICB9XG5cbiAgLy8gQ2hlY2sgaWYgdXNlcm5hbWUgb3IgTklQIGFscmVhZHkgZXhpc3RzXG4gIGNvbnN0IGNoZWNrUXVlcnkgPSAnU0VMRUNUIGlkIEZST00gdXNlcnMgV0hFUkUgdXNlcm5hbWUgPSA/IE9SIG5pcCA9ID8nXG4gIGNvbnN0IGV4aXN0aW5nVXNlciA9IGF3YWl0IGV4ZWN1dGVRdWVyeShjaGVja1F1ZXJ5LCBbdXNlcm5hbWUsIG5pcF0pXG5cbiAgaWYgKCFleGlzdGluZ1VzZXIuc3VjY2Vzcykge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIG1lc3NhZ2U6ICdHYWdhbCBtZW1lcmlrc2EgZGF0YSBleGlzdGluZydcbiAgICB9KVxuICB9XG5cbiAgaWYgKGV4aXN0aW5nVXNlci5kYXRhLmxlbmd0aCA+IDApIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDkpLmpzb24oeyBcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLCBcbiAgICAgIG1lc3NhZ2U6ICdVc2VybmFtZSBhdGF1IE5JUCBzdWRhaCBkaWd1bmFrYW4nIFxuICAgIH0pXG4gIH1cblxuICAvLyBIYXNoIHBhc3N3b3JkXG4gIGNvbnN0IGhhc2hlZFBhc3N3b3JkID0gYXdhaXQgYmNyeXB0Lmhhc2gocGFzc3dvcmQsIDEwKVxuXG4gIC8vIEluc2VydCBuZXcgdXNlclxuICBjb25zdCBpbnNlcnRRdWVyeSA9IGBcbiAgICBJTlNFUlQgSU5UTyB1c2VycyAoXG4gICAgICB1c2VybmFtZSwgcGFzc3dvcmQsIG5pcCwgbmFtYSwgcGFuZ2thdCwgZ29sb25nYW4sIGphYmF0YW4sIHBlbmRpZGlrYW4sIHJvbGUsIHN0YXR1c1xuICAgICkgVkFMVUVTICg/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCAncGVnYXdhaScsICdha3RpZicpXG4gIGBcblxuICBjb25zdCBpbnNlcnRQYXJhbXMgPSBbXG4gICAgdXNlcm5hbWUsXG4gICAgaGFzaGVkUGFzc3dvcmQsXG4gICAgbmlwLFxuICAgIG5hbWEsXG4gICAgcGFuZ2thdCxcbiAgICBnb2xvbmdhbixcbiAgICBqYWJhdGFuLFxuICAgIHBlbmRpZGlrYW5cbiAgXVxuXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGV4ZWN1dGVRdWVyeShpbnNlcnRRdWVyeSwgaW5zZXJ0UGFyYW1zKVxuXG4gIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICBjb25zb2xlLmVycm9yKCdJbnNlcnQgdXNlciBlcnJvcjonLCByZXN1bHQuZXJyb3IpXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgbWVzc2FnZTogJ0dhZ2FsIG1lbmFtYmFoa2FuIHBlbmdndW5hJ1xuICAgIH0pXG4gIH1cblxuICBjb25zb2xlLmxvZygn4pyFIFVzZXIgY3JlYXRlZCBpbiBkYXRhYmFzZScpXG5cbiAgcmVzLnN0YXR1cygyMDEpLmpzb24oe1xuICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgbWVzc2FnZTogJ1BlbmdndW5hIGJlcmhhc2lsIGRpdGFtYmFoa2FuJ1xuICB9KVxufVxuXG4vLyBQVVQgLSBVcGRhdGUgdXNlclxuYXN5bmMgZnVuY3Rpb24gdXBkYXRlVXNlcihyZXEsIHJlcykge1xuICBjb25zdCB7XG4gICAgcmVxdWVzdG9yUm9sZSxcbiAgICBpZCxcbiAgICB1c2VybmFtZSxcbiAgICBwYXNzd29yZCxcbiAgICBuYW1hLFxuICAgIHBhbmdrYXQsXG4gICAgZ29sb25nYW4sXG4gICAgamFiYXRhbixcbiAgICBwZW5kaWRpa2FuXG4gIH0gPSByZXEuYm9keVxuXG4gIC8vIE9ubHkgYWRtaW4gY2FuIHVwZGF0ZSB1c2VycyAoa2VwYWxhX2JwcyBjYW4gb25seSByZWFkKVxuICBpZiAocmVxdWVzdG9yUm9sZSAhPT0gJ2FkbWluJykge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIG1lc3NhZ2U6ICdBa3NlcyBkaXRvbGFrIC0gSGFueWEgYWRtaW4geWFuZyBkYXBhdCBtZW5ndWJhaCBkYXRhIHBlZ2F3YWknXG4gICAgfSlcbiAgfVxuXG4gIGlmICghaWQpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLCBcbiAgICAgIG1lc3NhZ2U6ICdJRCBwZW5nZ3VuYSBkaXBlcmx1a2FuJyBcbiAgICB9KVxuICB9XG5cbiAgLy8gQ2hlY2sgaWYgdXNlciBleGlzdHNcbiAgY29uc3QgY2hlY2tRdWVyeSA9ICdTRUxFQ1QgaWQgRlJPTSB1c2VycyBXSEVSRSBpZCA9ID8nXG4gIGNvbnN0IGV4aXN0aW5nVXNlciA9IGF3YWl0IGV4ZWN1dGVRdWVyeShjaGVja1F1ZXJ5LCBbaWRdKVxuXG4gIGlmICghZXhpc3RpbmdVc2VyLnN1Y2Nlc3MgfHwgZXhpc3RpbmdVc2VyLmRhdGEubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgXG4gICAgICBzdWNjZXNzOiBmYWxzZSwgXG4gICAgICBtZXNzYWdlOiAnUGVuZ2d1bmEgdGlkYWsgZGl0ZW11a2FuJyBcbiAgICB9KVxuICB9XG5cbiAgLy8gQnVpbGQgdXBkYXRlIHF1ZXJ5XG4gIGxldCB1cGRhdGVRdWVyeSA9IGBcbiAgICBVUERBVEUgdXNlcnMgU0VUXG4gICAgICB1c2VybmFtZSA9ID8sIG5hbWEgPSA/LCBwYW5na2F0ID0gPywgZ29sb25nYW4gPSA/LCBqYWJhdGFuID0gPywgcGVuZGlkaWthbiA9ID9cbiAgYFxuICBsZXQgdXBkYXRlUGFyYW1zID0gW1xuICAgIHVzZXJuYW1lLCBuYW1hLCBwYW5na2F0LCBnb2xvbmdhbiwgamFiYXRhbiwgcGVuZGlkaWthblxuICBdXG5cbiAgLy8gQWRkIHBhc3N3b3JkIHRvIHVwZGF0ZSBpZiBwcm92aWRlZFxuICBpZiAocGFzc3dvcmQpIHtcbiAgICBjb25zdCBoYXNoZWRQYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5oYXNoKHBhc3N3b3JkLCAxMClcbiAgICB1cGRhdGVRdWVyeSArPSAnLCBwYXNzd29yZCA9ID8nXG4gICAgdXBkYXRlUGFyYW1zLnB1c2goaGFzaGVkUGFzc3dvcmQpXG4gIH1cblxuICB1cGRhdGVRdWVyeSArPSAnIFdIRVJFIGlkID0gPydcbiAgdXBkYXRlUGFyYW1zLnB1c2goaWQpXG5cbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZXhlY3V0ZVF1ZXJ5KHVwZGF0ZVF1ZXJ5LCB1cGRhdGVQYXJhbXMpXG5cbiAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1VwZGF0ZSB1c2VyIGVycm9yOicsIHJlc3VsdC5lcnJvcilcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBtZXNzYWdlOiAnR2FnYWwgbWVtcGVyYmFydWkgcGVuZ2d1bmEnXG4gICAgfSlcbiAgfVxuXG4gIGNvbnNvbGUubG9nKCfinIUgVXNlciB1cGRhdGVkIGluIGRhdGFiYXNlJylcblxuICByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgc3VjY2VzczogdHJ1ZSxcbiAgICBtZXNzYWdlOiAnRGF0YSBwZW5nZ3VuYSBiZXJoYXNpbCBkaXBlcmJhcnVpJ1xuICB9KVxufVxuXG4vLyBERUxFVEUgLSBEZWxldGUgdXNlclxuYXN5bmMgZnVuY3Rpb24gZGVsZXRlVXNlcihyZXEsIHJlcykge1xuICBjb25zdCB7IGlkLCByZXF1ZXN0b3JSb2xlIH0gPSByZXEucXVlcnlcblxuICAvLyBPbmx5IGFkbWluIGNhbiBkZWxldGUgdXNlcnMgKGtlcGFsYV9icHMgY2FuIG9ubHkgcmVhZClcbiAgaWYgKHJlcXVlc3RvclJvbGUgIT09ICdhZG1pbicpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oe1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBtZXNzYWdlOiAnQWtzZXMgZGl0b2xhayAtIEhhbnlhIGFkbWluIHlhbmcgZGFwYXQgbWVuZ2hhcHVzIHBlZ2F3YWknXG4gICAgfSlcbiAgfVxuXG4gIGlmICghaWQpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLCBcbiAgICAgIG1lc3NhZ2U6ICdJRCBwZW5nZ3VuYSBkaXBlcmx1a2FuJyBcbiAgICB9KVxuICB9XG5cbiAgLy8gQ2hlY2sgaWYgdXNlciBleGlzdHMgYW5kIGdldCByb2xlXG4gIGNvbnN0IGNoZWNrUXVlcnkgPSAnU0VMRUNUIHJvbGUgRlJPTSB1c2VycyBXSEVSRSBpZCA9ID8nXG4gIGNvbnN0IGV4aXN0aW5nVXNlciA9IGF3YWl0IGV4ZWN1dGVRdWVyeShjaGVja1F1ZXJ5LCBbaWRdKVxuXG4gIGlmICghZXhpc3RpbmdVc2VyLnN1Y2Nlc3MgfHwgZXhpc3RpbmdVc2VyLmRhdGEubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgXG4gICAgICBzdWNjZXNzOiBmYWxzZSwgXG4gICAgICBtZXNzYWdlOiAnUGVuZ2d1bmEgdGlkYWsgZGl0ZW11a2FuJyBcbiAgICB9KVxuICB9XG5cbiAgLy8gQ2hlY2sgaWYgdXNlciBpcyBhZG1pbiAoZG9uJ3QgYWxsb3cgZGVsZXRpbmcgYWRtaW4gdXNlcnMpXG4gIGlmIChleGlzdGluZ1VzZXIuZGF0YVswXS5yb2xlID09PSAnYWRtaW4nKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgXG4gICAgICBzdWNjZXNzOiBmYWxzZSwgXG4gICAgICBtZXNzYWdlOiAnQWRtaW4gdGlkYWsgZGFwYXQgZGloYXB1cycgXG4gICAgfSlcbiAgfVxuXG4gIC8vIERlbGV0ZSB1c2VyXG4gIGNvbnN0IGRlbGV0ZVF1ZXJ5ID0gJ0RFTEVURSBGUk9NIHVzZXJzIFdIRVJFIGlkID0gPydcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZXhlY3V0ZVF1ZXJ5KGRlbGV0ZVF1ZXJ5LCBbaWRdKVxuXG4gIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICBjb25zb2xlLmVycm9yKCdEZWxldGUgdXNlciBlcnJvcjonLCByZXN1bHQuZXJyb3IpXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgbWVzc2FnZTogJ0dhZ2FsIG1lbmdoYXB1cyBwZW5nZ3VuYSdcbiAgICB9KVxuICB9XG5cbiAgY29uc29sZS5sb2coJ+KchSBVc2VyIGRlbGV0ZWQgZnJvbSBkYXRhYmFzZScpXG5cbiAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgbWVzc2FnZTogJ1BlbmdndW5hIGJlcmhhc2lsIGRpaGFwdXMnXG4gIH0pXG59XG4iXSwibmFtZXMiOlsiZXhlY3V0ZVF1ZXJ5IiwiYmNyeXB0IiwiaGFuZGxlciIsInJlcSIsInJlcyIsIm1ldGhvZCIsImdldFVzZXJzIiwiY3JlYXRlVXNlciIsInVwZGF0ZVVzZXIiLCJkZWxldGVVc2VyIiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJlcnJvciIsImNvbnNvbGUiLCJzdWNjZXNzIiwicm9sZSIsInF1ZXJ5IiwicmVzdWx0IiwiRFVNTVlfVVNFUlMiLCJtYXBwZWQiLCJtYXAiLCJ1c2VyIiwiaWQiLCJ1c2VybmFtZSIsIm5pcCIsIm5hbWEiLCJwYW5na2F0IiwiZ29sb25nYW4iLCJqYWJhdGFuIiwicGVuZGlkaWthbiIsImNyZWF0ZWRBdCIsImNyZWF0ZWRfYXQiLCJsb2ciLCJkYXRhIiwicmVxdWVzdG9yUm9sZSIsInBhc3N3b3JkIiwiYm9keSIsImNoZWNrUXVlcnkiLCJleGlzdGluZ1VzZXIiLCJsZW5ndGgiLCJoYXNoZWRQYXNzd29yZCIsImhhc2giLCJpbnNlcnRRdWVyeSIsImluc2VydFBhcmFtcyIsInVwZGF0ZVF1ZXJ5IiwidXBkYXRlUGFyYW1zIiwicHVzaCIsImRlbGV0ZVF1ZXJ5Il0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./pages/api/users/index.js\n");

/***/ }),

/***/ "bcryptjs":
/*!***************************!*\
  !*** external "bcryptjs" ***!
  \***************************/
/***/ ((module) => {

module.exports = import("bcryptjs");;

/***/ }),

/***/ "mysql2/promise":
/*!*********************************!*\
  !*** external "mysql2/promise" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("mysql2/promise");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fusers&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cusers%5Cindex.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();